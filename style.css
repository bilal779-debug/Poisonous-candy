/* style.css - Visual Upgrade Pack */
* {
  transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
  box-sizing: border-box;
}

/* Global styles for 100% screen fit */
body, html {
  margin: 0;
  padding: 0;
  overflow: hidden; /* No scrolling for html/body */
  height: 100vh; /* Full viewport height */
  width: 100vw; /* Full viewport width */
}

/* Universal box-sizing */
* {
  box-sizing: border-box;
}

/* ===== BASE THEME (LIGHT) ===== */
body.theme-light {
    background: linear-gradient(135deg, #fef2f2, #fffbeb); /* Light pink to light yellow */
    color: #333;
}

/* ===== DARK THEME ===== */
body.theme-dark {
    background: linear-gradient(135deg, #2d3748, #1a202c); /* Dark gray to darker gray */
    color: #e2e8f0; /* Light text */
}
body.theme-dark .app-container,
body.theme-dark .header-bar,
body.theme-dark .nav-bar,
body.theme-dark .game-mode-card,
body.theme-dark .player-vs-player,
body.theme-dark .info-card,
body.theme-dark .popup-inner,
body.theme-dark .input,
body.theme-dark .list-container,
body.theme-dark #gameInviteNotificationPopup,
body.theme-dark #inviteDeclinedNotificationPopup { /* Added for new notification */
    background-color: #2d3748; /* Darker background for elements */
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
    border: 1px solid #4a5568;
}
body.theme-dark .section-title {
    color: #f87171; /* Red for titles */
}
body.theme-dark .section-subtitle,
body.theme-dark .player-box span,
body.theme-dark .info-card,
body.theme-dark .tab-button,
body.theme-dark .list-item-info span,
body.theme-dark .list-item-info small,
body.theme-dark .popup-inner h2,
body.theme-dark .popup-inner label,
body.theme-dark .popup-inner p {
    color: #cbd5e1; /* Lighter gray for text */
}
body.theme-dark .top-icon,
body.theme-dark .nav-item {
    color: #a0aec0; /* Lighter gray for icons */
}
body.theme-dark .nav-item.active,
body.theme-dark .nav-item:hover,
body.theme-dark .top-icon:hover {
    color: #a855f7; /* Purple accent */
}
body.theme-dark .tab-button.active {
    background-color: #4a5568; /* Darker background for active tab */
    color: #a855f7;
    border-bottom-color: #a855f7;
}
body.theme-dark .tab-button:hover:not(.active) {
    background-color: #4a5568;
    color: #e2e8f0;
}
body.theme-dark .list-item {
    border-bottom-color: #4a5568;
}
body.theme-dark .btn-blue, body.theme-dark .btn-green {
    background-color: #4a5568; /* Darker buttons */
    color: #e2e8f0;
}
body.theme-dark .btn-blue:hover { background-color: #3b82f6; } /* Original blue on hover */
body.theme-dark .btn-green:hover { background-color: #22c55e; } /* Original green on hover */
body.theme-dark .google-signin-button {
    background-color: #555; /* Darker google button */
}
body.theme-dark .google-signin-button:hover {
    background-color: #333;
}
body.theme-dark .toggle-button.on {
    background-color: #34d399; /* Green remains */
}
body.theme-dark .toggle-button.off {
    background-color: #ef4444; /* Red remains */
}
body.theme-dark #customConfirm .popup-inner {
    background-color: #4a5568;
    color: #e2e8f0;
}
body.theme-dark #customConfirm #confirmMessage {
    color: #e2e8f0;
}
body.theme-dark #confirmCancel {
    background-color: #60a5fa;
    color: white;
}
body.theme-dark #confirmCancel:hover {
    background-color: #3b82f6;
}
body.theme-dark #confirmOk {
    background-color: #f87171;
    color: white;
}
body.theme-dark #confirmOk:hover {
    background-color: #ef4444;
}
body.theme-dark .candy-btn {
    background-color: #e2e8f0; /* White for dark theme */
    border: 2px solid #a0aec0; /* Lighter border for candies */
}
body.theme-dark .candy-btn.poison-candy {
    border: 3px solid #f87171; /* Red border for poison */
    box-shadow: 0 0 15px rgba(248, 113, 113, 0.6);
}
body.theme-dark .candy-btn:hover:not(:disabled) {
    border-color: #a855f7; /* Purple hover border */
}
body.theme-dark .glass-selected {
    background-color: rgba(96, 165, 250, 0.3) !important; /* Blue for dark theme */
    border: 2px solid rgba(96, 165, 250, 0.6) !important; /* Blue border for dark theme */
    box-shadow: 0 4px 8px rgba(96, 165, 250, 0.3) !important; /* Blue shadow for dark theme */
}


/* ===== CANDYLAND THEME ===== */
body.theme-candyland {
    background: linear-gradient(135deg, #ffb3e6, #a0d9ff, #ffe0b3); /* Pastel gradient */
    color: #6a0572; /* Dark purple text */
}
body.theme-candyland .app-container,
body.theme-candyland .header-bar,
body.theme-candyland .nav-bar,
body.theme-candyland .game-mode-card,
body.theme-candyland .player-vs-player,
body.theme-candyland .info-card,
body.theme-candyland .popup-inner,
body.theme-candyland .input,
body.theme-candyland .list-container,
body.theme-candyland #gameInviteNotificationPopup,
body.theme-candyland #inviteDeclinedNotificationPopup { /* Added for new notification */
    background-color: rgba(255, 255, 255, 0.8); /* Slightly transparent white */
    box-shadow: 0 0 20px rgba(255, 105, 180, 0.4);
    border: 1px solid #ff80ab;
}
body.theme-candyland .section-title {
    color: #ff69b4; /* Hot pink */
}
body.theme-candyland .section-subtitle,
body.theme-candyland .player-box span,
body.theme-candyland .info-card,
body.theme-candyland .tab-button,
body.theme-candyland .list-item-info span,
body.theme-candyland .list-item-info small,
body.theme-candyland .popup-inner h2,
body.theme-candyland .popup-inner label,
body.theme-candyland .popup-inner p {
    color: #8b008b; /* Dark magenta */
}
body.theme-candyland .top-icon,
body.theme-candyland .nav-item {
    color: #da70d6; /* Orchid */
}
body.theme-candyland .nav-item.active,
body.theme-candyland .nav-item:hover,
body.theme-candyland .top-icon:hover {
    color: #ff1493; /* Deep pink */
}
body.theme-candyland .tab-button.active {
    background-color: #ffc0cb; /* Light pink background for active tab */
    color: #ff1493;
    border-bottom-color: #ff1493;
}
body.theme-candyland .tab-button:hover:not(.active) {
    background-color: #ffe4e1;
    color: #ff69b4;
}
body.theme-candyland .list-item {
    border-bottom-color: #ffc0cb;
}
body.theme-candyland .btn-blue { background-color: #87ceeb; } /* Sky blue */
body.theme-candyland .btn-blue:hover { background-color: #6495ed; }
body.theme-candyland .btn-green { background-color: #90ee90; } /* Light green */
body.theme-candyland .btn-green:hover { background-color: #3cb371; }
body.theme-candyland .btn-red { background-color: #ff6347; } /* Tomato */
body.theme-candyland .btn-red:hover { background-color: #dc143c; }
body.theme-candyland .google-signin-button {
    background-color: #ffb6c1; /* Light pink */
    color: #8b008b;
}
body.theme-candyland .google-signin-button:hover {
    background-color: #ff99aa;
}
body.theme-candyland .toggle-button.on {
    background-color: #34d399; /* Green remains */
}
body.theme-candyland .toggle-button.off {
    background-color: #ef4444; /* Red remains */
}
body.theme-candyland .candy-btn {
    background-color: white; /* White for candyland theme */
    border: 2px solid #ff69b4; /* Hot pink border for candies */
}
body.theme-candyland .candy-btn.poison-candy {
    border: 3px solid #ff0000; /* Bright red poison */
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.6);
}
body.theme-candyland .candy-btn:hover:not(:disabled) {
    border-color: #ff1493; /* Deep pink hover border */
}
body.theme-candyland .glass-selected {
    background-color: rgba(135, 206, 235, 0.3) !important; /* Sky blue for candyland */
    border: 2px solid rgba(135, 206, 235, 0.6) !important; /* Sky blue border for candyland */
    box-shadow: 0 4px 8px rgba(135, 206, 235, 0.3) !important; /* Sky blue shadow for candyland */
}

/* ===== HALLOWEEN THEME ===== */
body.theme-halloween {
    background: linear-gradient(135deg, #1a1a1a, #331a00); /* Dark, earthy gradient */
    color: #f0f0f0; /* Light text */
}
body.theme-halloween .app-container,
body.theme-halloween .header-bar,
body.theme-halloween .nav-bar,
body.theme-halloween .game-mode-card,
body.theme-halloween .player-vs-player,
body.theme-halloween .info-card,
body.theme-halloween .popup-inner,
body.theme-halloween .input,
body.theme-halloween .list-container,
body.theme-halloween #gameInviteNotificationPopup,
body.theme-halloween #inviteDeclinedNotificationPopup { /* Added for new notification */
    background-color: #2a2a2a; /* Dark background for elements */
    box-shadow: 0 0 20px rgba(255, 140, 0, 0.4); /* Orange glow */
    border: 1px solid #ff8c00; /* Dark orange border */
}
body.theme-halloween .section-title {
    color: #ff8c00; /* Dark orange */
}
body.theme-halloween .section-subtitle,
body.theme-halloween .player-box span,
body.theme-halloween .info-card,
body.theme-halloween .tab-button,
body.theme-halloween .list-item-info span,
body.theme-halloween .list-item-info small,
body.theme-halloween .popup-inner h2,
body.theme-halloween .popup-inner label,
body.theme-halloween .popup-inner p {
    color: #e0e0e0; /* Off-white text */
}
body.theme-halloween .top-icon,
body.theme-halloween .nav-item {
    color: #ffa500; /* Orange */
}
body.theme-halloween .nav-item.active,
body.theme-halloween .nav-item:hover,
body.theme-halloween .top-icon:hover {
    color: #8a2be2; /* Blue-violet */
}
body.theme-halloween .tab-button.active {
    background-color: #4d004d; /* Dark purple background for active tab */
    color: #ffa500;
    border-bottom-color: #ffa500;
}
body.theme-halloween .tab-button:hover:not(.active) {
    background-color: #330033;
    color: #ff8c00;
}
body.theme-halloween .list-item {
    border-bottom-color: #4d004d;
}
body.theme-halloween .btn-blue { background-color: #8a2be2; } /* Blue-violet */
body.theme-halloween .btn-blue:hover { background-color: #6a0dad; }
body.theme-halloween .btn-green { background-color: #32cd32; } /* Lime green */
body.theme-halloween .btn-green:hover { background-color: #228b22; }
body.theme-halloween .btn-red { background-color: #dc143c; } /* Crimson */
body.theme-halloween .btn-red:hover { background-color: #8b0000; }
body.theme-halloween .google-signin-button {
    background-color: #663399; /* Rebecca purple */
    color: white;
}
body.theme-halloween .google-signin-button:hover {
    background-color: #4b0082;
}
body.theme-halloween .toggle-button.on {
    background-color: #34d399; /* Green remains */
}
body.theme-halloween .toggle-button.off {
    background-color: #ef4444; /* Red remains */
}
body.theme-halloween .candy-btn {
    background-color: #f0f0f0; /* Off-white for halloween theme */
    border: 2px solid #ff8c00; /* Dark orange border for candies */
}
body.theme-halloween .candy-btn.poison-candy {
    border: 3px solid #ff0000; /* Bright red poison */
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.6);
}
body.theme-halloween .candy-btn:hover:not(:disabled) {
    border-color: #8a2be2; /* Blue-violet hover border */
}
body.theme-halloween .glass-selected {
    background-color: rgba(138, 43, 226, 0.3) !important; /* Blue-violet for halloween */
    border: 2px solid rgba(138, 43, 226, 0.6) !important; /* Blue-violet border for halloween */
    box-shadow: 0 4px 8px rgba(138, 43, 226, 0.3) !important; /* Blue-violet shadow for halloween */
}


/* ===== FONT SIZE CLASSES (Apply to body) ===== */
body.font-size-small {
    font-size: 0.85em; /* 15% smaller than base */
}
body.font-size-medium {
    font-size: 1em; /* Default base size */
}
body.font-size-large {
    font-size: 1.15em; /* 15% larger than base */
}


/* ===== CANDY SIZE CLASSES (Apply to #grid button) ===== */
#grid button.candy-size-small {
    width: 20vw;
    height: 20vw;
    max-width: 90px;
    max-height: 90px;
    font-size: 5.5vh;
    max-font-size: 2.5rem;
    border-radius: 0.5rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

#grid button.candy-size-medium {
    width: 24.5vw; /* Screenshot-matched size */
    height: 24.5vw;
    max-width: 145px;
    max-height: 145px;
    font-size: 10.5vh;
    max-font-size: 5.5rem;
    border-radius: 1rem;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

#grid button.candy-size-large {
    width: 28vw;
    height: 28vw;
    max-width: 170px;
    max-height: 170px;
    font-size: 13vh;
    max-font-size: 7rem;
    border-radius: 1.2rem;
    box-shadow: 0 6px 12px rgba(0,0,0,0.2);
}

/* Default candy button styles (will be overridden by specific size classes) */
#grid button {
    background-color: white; /* Default white background */
    border: 2px solid #e2e8f0; /* Light gray border */
    padding: 0.5vw; /* Responsive padding */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.1s ease-in-out, box-shadow 0.2s, border-color 0.2s, background-color 0.2s;
}

#grid button:hover:not(:disabled) {
    transform: scale(1.08); /* Slightly larger hover effect */
    box-shadow: 0 6px 12px rgba(0,0,0,0.25); /* Stronger shadow on hover */
    border-color: #a855f7; /* Purple border on hover */
}

#grid button:disabled {
    opacity: 0.6; /* Slightly more opaque when disabled */
    cursor: not-allowed;
}

/* Updated glass-selected class for blue effect */
.glass-selected {
    background-color: rgba(96, 165, 250, 0.3) !important; /* Blue transparent */
    border: 2px solid rgba(96, 165, 250, 0.6) !important; /* Blue transparent border */
    box-shadow: 0 4px 8px rgba(96, 165, 250, 0.3) !important; /* Blue shadow */
}

.poison-candy {
    border: 3px solid #dc2626; /* Darker red border for poison */
    box-shadow: 0 0 15px rgba(220, 38, 38, 0.6); /* Red glow for poison */
}


/* Main container for the app */
.app-container {
    display: flex;
    flex-direction: column;
    width: 100%; /* Changed from fixed max-width to 100% for full responsiveness */
    max-width: 480px; /* Keep max-width for larger screens */
    height: 100vh; /* Take full viewport height */
    background-color: #fefefe; /* Near white background for content area */
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    position: relative; /* For absolute positioning of popups */
}

/* Header Bar */
.header-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1vh 2vw; /* Increased horizontal padding slightly to ensure space */
    background-color: #fff; /* White header background */
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    z-index: 10; /* Ensure header is above content */
    width: 100%; /* Full width of app-container */
    flex-shrink: 0; /* Prevent shrinking */
}

.profile-icon-container, .top-right-icons {
    display: flex;
    align-items: center;
    gap: 2vw; /* Use vw for gap */
}

.profile-icon {
    width: 10vw; /* Responsive width */
    height: 10vw; /* Responsive height */
    max-width: 50px; /* Max size for larger screens */
    max-height: 50px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #a855f7; /* Purple border */
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: transform 0.2s ease;
}

.profile-icon:hover {
    transform: scale(1.05);
}

.top-icon {
    font-size: 4vw; /* Responsive font size */
    max-font-size: 1.8rem; /* Max size for larger screens */
    color: #718096; /* Gray-600 */
    cursor: pointer;
    transition: color 0.2s ease, transform 0.2s ease;
}

.top-icon:hover {
    color: #a855f7; /* Purple-500 */
    transform: scale(1.1);
}

/* Main Content Area */
.main-content {
    flex-grow: 1; /* Take up remaining vertical space */
    padding: 2vh 2vw; /* Use vh/vw for padding */
    display: flex;
    flex-direction: column;
    align-items: center; /* Center content horizontally */
    justify-content: flex-start; /* Align content to top */
    width: 100%; /* Full width */
    overflow-y: auto; /* Allow scrolling for content if needed, but aim to avoid */
}

.game-section {
    width: 100%;
    max-width: 450px; /* Consistent width for sections */
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-grow: 1; /* Allow sections to take available space */
}

.section-title {
    font-size: 4.5vh; /* Responsive font size */
    font-weight: bold;
    color: #ef4444; /* Red-500 */
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    margin-bottom: 1vh; /* Use vh for margin */
}

.section-subtitle {
    font-size: 3vh; /* Responsive font size */
    font-weight: 600;
    color: #4a5568; /* Gray-700 */
    margin-bottom: 3vh; /* Use vh for margin */
}

/* Game Mode Cards (Lobby) */
.game-mode-card {
    background-color: white;
    border-radius: 1.5rem; /* rounded-2xl */
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
    padding: 3vh 3vw; /* Use vh/vw for padding */
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    width: 90%; /* Responsive width */
    max-width: 350px; /* Max width for larger screens */
    height: 20vh; /* Responsive height */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-bottom: 2vh; /* Use vh for margin */
}

.game-mode-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 20px -5px rgba(0, 0, 0, 0.15), 0 6px 10px -3px rgba(0, 0, 0, 0.08);
}

.game-mode-card .icon {
    font-size: 7vh; /* Responsive icon size */
    margin-bottom: 1vh; /* Use vh for margin */
    color: #a855f7; /* Purple color for icons */
}

.game-mode-card h3 {
    font-size: 3vh; /* Responsive font size */
    font-weight: 600; /* font-semibold */
    color: #4a5568; /* gray-700 */
}

.game-mode-card p {
    font-size: 1.8vh; /* Responsive font size */
    color: #718096; /* gray-600 */
    margin-top: 1vh; /* Use vh for margin */
}

/* Bottom Navigation Bar */
.nav-bar {
    display: flex;
    justify-content: space-around;
    align-items: center;
    width: 100%;
    padding: 1.5vh 0; /* Use vh for padding */
    background-color: #fff; /* White nav bar background */
    box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
    z-index: 10; /* Ensure nav bar is above content */
    flex-shrink: 0; /* Prevent shrinking */
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    color: #718096; /* Gray-600 */
    transition: color 0.2s ease, transform 0.2s ease;
    font-size: 1.8vh; /* Responsive font size */
    font-weight: 500;
}

.nav-item.active {
    color: #a855f7; /* Purple-500 */
    transform: translateY(-0.5vh); /* Slight lift for active item */
}

.nav-item:hover {
    color: #a855f7; /* Purple-500 */
}

.nav-item .icon {
    font-size: 3.5vh; /* Responsive icon size */
    margin-bottom: 0.5vh; /* Use vh for margin */
}

/* Popups (General Styling) */
.popup {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.4);
    z-index: 1000;
    backdrop-filter: blur(5px);
    overflow-y: auto; /* Allow popup content to scroll if needed */
    padding: 2vh 2vw; /* Use vh/vw for padding */
}

.popup-inner {
    background-color: white;
    padding: 4vh 4vw; /* Use vh/vw for padding */
    border-radius: 1.5rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    max-width: 450px;
    width: 90%;
    text-align: center;
    max-height: 90vh; /* Max height for popup inner content */
    overflow-y: auto; /* Allow popup content to scroll if needed */
}

.popup-inner .input {
    margin-bottom: 2vh; /* Use vh for margin */
}

/* Specific Popup Adjustments */
#auth {
    position: absolute; /* Position over app-container */
    inset: 0;
    background-color: #fefefe; /* Match app-container background */
    z-index: 20; /* Higher than other sections but lower than actual popups */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4vh 4vw; /* Use vh/vw for padding */
}
#auth .login-register-form {
    width: 100%;
    max-width: 300px;
    margin-top: 3vh; /* Use vh for margin */
}
#auth .input {
    width: 100%;
    padding: 1.5vh; /* Use vh for padding */
    border: 1px solid #e2e8f0;
    border-radius: 0.5rem;
    margin-bottom: 2vh; /* Use vh for margin */
}
#auth .btn-blue, #auth .btn-green {
    width: 100%;
    padding: 1.5vh; /* Use vh for padding */
    border-radius: 0.75rem;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: background-color 0.2s ease;
}
#auth .btn-blue { background-color: #60a5fa; } /* blue-400 */
#auth .btn-blue:hover { background-color: #3b82f6; } /* blue-500 */
#auth .btn-green { background-color: #34d399; } /* green-400 */
#auth .btn-green:hover { background-color: #22c55e; } /* green-500 */
#auth .google-signin-button {
    background-color: #db4437; /* Google Red */
    color: white;
    padding: 1.5vh 3vw; /* Use vh/vw for padding */
    border-radius: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s ease-in-out;
    margin-top: 2vh; /* Use vh for margin */
    width: 100%;
    max-width: 280px;
    margin-left: auto;
    margin-right: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1vw; /* Use vw for gap */
}
#auth .google-signin-button:hover {
    background-color: #c0392b; /* Darker red */
}
#auth .google-signin-button img {
    width: 4vw; /* Responsive width */
    height: 4vw; /* Responsive height */
    max-width: 20px;
    max-height: 20px;
}

/* Game Area (when game is active) */
#gameArea {
    position: absolute;
    inset: 0;
    background-color: #fefefe;
    z-index: 15; /* Higher than sections, lower than popups */
    display: flex;
    flex-direction: column;
    align-items: center;
    /* Changed to flex-start to push avatars/info to top */
    justify-content: flex-start; 
    padding: 1vh 2vw; /* Reduced vertical padding */
    height: 100vh; /* Ensure it takes full height */
    width: 100vw; /* Full width */
    max-width: 480px; /* Constrain to app-container's max-width */
    margin: 0 auto; /* Center it within the body */
    box-sizing: border-box; /* Include padding in height calculation */
}

/* Player VS Player Section - Moved to top */
#playerVsPlayerSection {
    background-color: white;
    border-radius: 1.5rem;
    box-shadow: 0 5px 10px rgba(0,0,0,0.08);
    padding: 1.5vh 3vw; /* Adjusted padding */
    display: flex;
    align-items: center;
    justify-content: space-around;
    gap: 2vw; /* Adjusted gap */
    margin-top: 1.5vh; /* Space from top of gameArea */
    margin-bottom: 1.5vh; /* Space from info card */
    width: 90%; /* Responsive width */
    max-width: 350px;
    flex-shrink: 0; /* Prevent shrinking */
}

.player-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.3vh; /* Responsive gap */
    text-align: center;
}

.player-box img {
    width: 10vw; /* Larger avatars */
    height: 10vw; /* Larger avatars */
    max-width: 50px; /* Max size */
    max-height: 50px;
    border-radius: 9999px; /* rounded-full */
    object-fit: cover;
    border: 2px solid #a855f7; /* border-purple-400 */
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.player-box span {
    font-size: 2vh; /* Adjusted font size */
    max-font-size: 0.9rem;
    font-weight: 600; /* font-semibold */
    color: #4a5568; /* gray-700 */
}

.vs-text {
    font-size: 3vh; /* Adjusted font size */
    max-font-size: 1.3rem;
    font-weight: 700; /* font-bold */
    color: #a855f7; /* purple-500 */
}

/* Info Card - Positioned right below avatars */
.info-card {
    background-color: white;
    border-radius: 1.5rem;
    box-shadow: 0 5px 10px rgba(0,0,0,0.08);
    padding: 1.5vh 3vw; /* Adjusted padding */
    text-align: center;
    font-size: 2.2vh; /* Adjusted font size */
    max-font-size: 1rem;
    font-weight: 500; /* font-medium */
    color: #4a5568; /* gray-700 */
    width: 90%; /* Responsive width */
    max-width: 350px;
    margin-top: 1.5vh; /* Small margin to separate from avatars */
    margin-bottom: 2.5vh; /* Increased margin to push grid down */
    flex-shrink: 0; /* Prevent shrinking */
}

#gameArea #grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1vw; /* Further reduced gap for maximum candy size */
    width: 100%;
    max-width: 98vw; /* Max width for grid - Increased even more */
    flex-grow: 1; /* Allow grid to take available space */
    justify-content: center; /* Center grid items */
    align-content: center; /* Center grid vertically if space allows */
    margin-bottom: 2.5vh; /* Space for exit button */
}

/* Exit Game Button */
#gameArea button {
    margin-top: auto; /* Push to bottom, using flexbox */
    margin-bottom: 2.5vh; /* Responsive bottom margin */
    padding: 1.8vh 4vw; /* Larger padding for button */
    font-size: 3vh; /* Larger font size for button */
    max-font-size: 1.2rem;
    border-radius: 0.75rem; /* rounded-lg */
    font-weight: 600; /* font-semibold */
    color: white; /* text-white */
    background-color: #ef4444; /* bg-red-500 */
    transition: background-color 0.2s ease-in-out;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1); /* shadow */
}
#gameArea button:hover {
    background-color: #dc2626; /* hover:bg-red-600 */
}


/* Custom Confirm Dialog Styling */
#customConfirm .popup-inner {
    background-color: #ffe0e0; /* Thoda light red background */
    border: none; /* Remove red border */
    color: #4a5568; /* Use general text color */
    animation: fadeInScale 0.3s ease-out forwards, pulse 2s infinite ease-in-out; /* Pulsing effect added */
}

#customConfirm #confirmMessage {
    color: #4a5568; /* Use general text color for message */
}

#confirmCancel {
    background-color: #e2e8f0; /* Light gray from game's palette (e.g., gray-200) */
    color: #4a5568; /* Darker gray text */
    transition: background-color 0.2s ease-in-out;
}
#confirmCancel:hover {
    background-color: #cbd5e1; /* Darker gray on hover (e.g., gray-300) */
}

#confirmOk {
    background-color: #ef4444; /* Red button (already red-500) */
    color: white;
    transition: background-color 0.2s ease-in-out;
}
#confirmOk:hover {
    background-color: #dc2626; /* Darker red on hover (red-600) */
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* New Pulsing Keyframes */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
}


/* Loader Styles */
.loader-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.6); /* Thoda translucent background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999; /* Baaki sab elements ke upar dikhega */
    transition: opacity 0.3s ease-in-out; /* Smooth fade in/out */
    opacity: 0; /* Shuru mein hidden */
    pointer-events: none; /* Jab hidden ho to clicks ignore kare */
}

.loader-overlay.show {
    opacity: 1; /* Dikhao */
    pointer-events: auto; /* Clicks allow kare */
}

.spinning-candy {
    font-size: 10vh; /* Responsive candy size */
    display: inline-block; /* Animation ke liye zaroori */
    animation: candySpin 1.5s linear infinite; /* Spinning animation */
}

@keyframes candySpin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Helper class for display: none; */
.hidden {
    display: none !important;
}

/* Styles for toggle buttons (Sound/Music) */
.toggle-button {
    padding: 1.5vh 3vw; /* Responsive padding */
    border-radius: 9999px; /* Full rounded */
    font-weight: 600;
    transition: all 0.2s ease-in-out;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1vw; /* Responsive gap */
    width: 30vw; /* Responsive width */
    max-width: 150px; /* Fixed width for consistency */
}

.toggle-button.on {
    background-color: #34d399; /* Green-400 */
    color: white;
    box-shadow: 0 4px 6px rgba(52, 211, 153, 0.3);
}

.toggle-button.off {
    background-color: #fca5a5; /* Red-300 */
    color: white;
    box-shadow: 0 4px 6px rgba(252, 165, 165, 0.3);
}

.toggle-button:hover {
    transform: translateY(-2px);
}

/* Google Sign-In Button */
.google-signin-button {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1vw; /* Responsive gap */
    background-color: #db4437; /* Google Red */
    color: white;
    padding: 1.5vh 3vw; /* Responsive padding */
    border-radius: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s ease-in-out;
    margin-top: 2vh; /* Responsive margin */
    width: 100%;
    max-width: 280px;
    margin-left: auto;
    margin-right: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1vw; /* Use vw for gap */
}
.google-signin-button:hover {
    background-color: #c0392b; /* Darker red */
}
.google-signin-button img {
    width: 4vw; /* Responsive width */
    height: 4vw; /* Responsive height */
    max-width: 20px;
    max-height: 20px;
}

/* New Styles for Friends Feature */
.friend-tabs {
  border-bottom: 2px solid #e2e8f0; /* gray-200 */
  margin-bottom: 3vh; /* Responsive margin */
}

.tab-button {
  flex: 1; /* Equal width tabs */
  padding: 1.5vh 2vw; /* Responsive padding */
  font-weight: 600;
  color: #718096; /* gray-600 */
  background-color: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  border-radius: 0.5rem 0.5rem 0 0; /* Rounded top corners */
}

.tab-button:hover:not(.active) {
  background-color: #f7fafc; /* gray-50 */
  color: #4a5568; /* gray-700 */
}

.tab-button.active {
  color: #a855f7; /* purple-500 */
  border-bottom-color: #a855f7;
  background-color: #f0e6ff; /* Light purple background */
}

.list-container {
  max-height: 40vh; /* Responsive max-height for scrollable lists */
  overflow-y: auto; /* Enable vertical scrolling */
  border: 1px solid #e2e8f0;
  border-radius: 0.75rem;
  padding: 2vh 2vw; /* Responsive padding */
  background-color: #f7fafc; /* Light background for lists */
  width: 100%; /* Ensure it takes full width of its container */
}

.list-item {
  display: flex;
  align-items: center;
  gap: 2vw; /* Responsive gap */
  padding: 1.5vh 0; /* Responsive padding */
  border-bottom: 1px solid #edf2f7; /* gray-100 */
}

.list-item:last-child {
  border-bottom: none;
}

.list-item img {
  width: 10vw; /* Responsive width */
  height: 10vw; /* Responsive height */
  max-width: 48px;
  max-height: 48px;
  border-radius: 9999px;
  object-fit: cover;
  border: 2px solid #a855f7; /* purple-500 */
}

.list-item-info {
  flex-grow: 1;
  text-align: left;
}

.list-item-info span {
  font-weight: 600;
  color: #4a5568;
  display: block;
  font-size: 2.2vh; /* Responsive font size */
}

.list-item-info small {
  color: #718096;
  font-size: 1.6vh; /* Responsive font size */
}

.list-item-actions {
  display: flex;
  gap: 1vw; /* Responsive gap */
}

.list-item-actions button {
  padding: 1vh 1.5vw; /* Responsive padding */
  border-radius: 0.5rem;
  font-size: 1.8vh; /* Responsive font size */
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: background-color 0.2s;
}

.list-item-actions .btn-accept {
  background-color: #34d399; /* green */
  color: white;
}
.list-item-actions .btn-accept:hover {
  background-color: #22c55e; /* darker green */
}

.list-item-actions .btn-reject, .list-item-actions .btn-remove {
  background-color: #f87171; /* red */
  color: white;
}
.list-item-actions .btn-reject:hover, .list-item-actions .btn-remove:hover {
  background-color: #ef4444; /* darker red */
}

.list-item-actions .btn-add {
  background-color: #60a5fa; /* blue */
  color: white;
}
.list-item-actions .btn-add:hover {
  background-color: #3b82f6; /* darker blue */
}

.list-item-status {
  font-size: 1.6vh; /* Responsive font size */
  color: #718096;
  font-style: italic;
}

/* Game Invite Notification Popup */
#gameInviteNotificationPopup {
    position: fixed;
    top: 2vh; /* Position from top */
    right: 2vw; /* Position from right */
    background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
    border-radius: 1rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    padding: 2vh 2vw;
    max-width: 80vw; /* Responsive width */
    z-index: 1100; /* Higher than other popups */
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 1vh;
    transform: translateX(120%); /* Start off-screen */
    transition: transform 0.5s ease-out;
}

#gameInviteNotificationPopup.show {
    transform: translateX(0); /* Slide in */
}

#gameInviteNotificationPopup img {
    width: 15vw; /* Responsive avatar size */
    height: 15vw;
    max-width: 60px;
    max-height: 60px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #a855f7;
    margin-bottom: 1vh;
}

#gameInviteNotificationPopup p {
    font-size: 2.2vh;
    font-weight: 600;
    color: #4a5568;
    line-height: 1.2;
}

#gameInviteNotificationPopup .button-group {
    display: flex;
    gap: 2vw;
    margin-top: 1.5vh;
}

#gameInviteNotificationPopup .btn-decline {
    background-color: #ef4444; /* Red */
    color: white;
    padding: 1.2vh 2.5vw;
    border-radius: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s ease;
}
#gameInviteNotificationPopup .btn-decline:hover {
    background-color: #dc2626;
}

#gameInviteNotificationPopup .btn-accept {
    background-color: #a855f7; /* Purple */
    color: white;
    padding: 1.2vh 2.5vw;
    border-radius: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s ease;
}
#gameInviteNotificationPopup .btn-accept:hover {
    background-color: #9333ea;
}

/* Invite Declined Notification Popup */
#inviteDeclinedNotificationPopup {
    position: fixed;
    top: 2vh; /* Position from top */
    right: 2vw; /* Position from right */
    background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
    border-radius: 1rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    padding: 2vh 2vw;
    max-width: 80vw; /* Responsive width */
    z-index: 1100; /* Higher than other popups */
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 1vh;
    transform: translateX(120%); /* Start off-screen */
    transition: transform 0.5s ease-out;
}

#inviteDeclinedNotificationPopup.show {
    transform: translateX(0); /* Slide in */
}

#inviteDeclinedNotificationPopup img {
    width: 15vw; /* Responsive avatar size */
    height: 15vw;
    max-width: 60px;
    max-height: 60px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #ef4444; /* Red border for declined */
    margin-bottom: 1vh;
}

#inviteDeclinedNotificationPopup p {
    font-size: 2.2vh;
    font-weight: 600;
    color: #4a5568;
    line-height: 1.2;
}

#inviteDeclinedNotificationPopup .btn-ok {
    background-color: #60a5fa; /* Blue */
    color: white;
    padding: 1.2vh 2.5vw;
    border-radius: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s ease;
    margin-top: 1.5vh;
}
#inviteDeclinedNotificationPopup .btn-ok:hover {
    background-color: #3b82f6;
}


/* Media Queries for smaller screens (max-width: 600px) */
@media (max-width: 600px) {
  .app-container {
    max-width: 100vw; /* On small screens, take full width */
  }
  .header-bar {
    padding: 1vh 3vw;
  }
  .profile-icon {
    width: 12vw;
    height: 12vw;
  }
  .top-icon {
    font-size: 5vw;
  }
  .main-content {
    padding: 1.5vh 3vw;
  }
  .section-title {
    font-size: 4vh;
  }
  .section-subtitle {
    font-size: 2.5vh;
    margin-bottom: 2.5vh;
  }
  .game-mode-card {
    padding: 2.5vh 4vw;
    height: 18vh;
    margin-bottom: 2vh;
  }
  .game-mode-card .icon {
    font-size: 6vh;
  }
  .game-mode-card h3 {
    font-size: 2.5vh;
  }
  .game-mode-card p {
    font-size: 1.6vh;
  }
  .nav-bar {
    padding: 1.2vh 0;
  }
  .nav-item {
    font-size: 1.6vh;
  }
  .nav-item .icon {
    font-size: 3vh;
  }
  .popup-inner {
    padding: 3vh 5vw;
  }
  #auth .input, #auth .btn-blue, #auth .btn-green, #auth .google-signin-button {
    padding: 1.2vh 2.5vw;
    font-size: 2vh;
  }
  #auth .google-signin-button img {
    width: 5vw;
    height: 5vw;
  }

  /* Game Area Specific Adjustments for small screens */
  #gameArea {
    padding: 0.5vh 2vw; /* Reduced padding */
  }
  #playerVsPlayerSection {
    margin-top: 1.5vh; /* Adjusted top margin for smaller screens */
    margin-bottom: 0.8vh; /* Adjusted bottom margin for smaller screens */
  }
  .player-box img {
    width: 10vw;
    height: 10vw;
    max-width: 40px; /* Keep max-width for very small screens */
    max-height: 40px;
  }
  .player-box span {
    font-size: 1.8vh;
  }
  .vs-text {
    font-size: 2.5vh;
  }
  .info-card {
    padding: 1.2vh 2vw;
    margin-top: 0.8vh; /* Adjusted top margin for smaller screens */
    margin-bottom: 1.5vh; /* Adjusted bottom margin for smaller screens */
    font-size: 2.1vh;
  }
  #gameArea #grid {
    max-width: 98vw; /* Adjusted max-width for grid */
    gap: 1.2vw; /* Adjusted gap for smaller screens */
    margin-bottom: 1.5vh;
  }
  /* Candy size adjustments for small screens */
  #grid button.candy-size-small {
    width: 18vw;
    height: 18vw;
    max-width: 80px;
    max-height: 80px;
    font-size: 4.5vh;
  }
  #grid button.candy-size-medium {
    width: 23.5vw;
    height: 23.5vw;
    max-width: 135px;
    max-height: 135px;
    font-size: 9.5vh;
  }
  #grid button.candy-size-large {
    width: 26vw;
    height: 26vw;
    max-width: 160px;
    max-height: 160px;
    font-size: 11.5vh;
  }

  #gameArea button { /* Exit Game Button */
    margin-top: auto; /* Push to bottom */
    margin-bottom: 1.5vh; /* Adjusted bottom margin for smaller screens */
    padding: 1.5vh 3vw;
    font-size: 2.5vh;
  }
  .toggle-button {
    width: 40vw;
    font-size: 2vh;
  }
  .list-item img {
    width: 12vw;
    height: 12vw;
  }
  .list-item-info span {
    font-size: 2vh;
  }
  .list-item-info small {
    font-size: 1.4vh;
  }
  .list-item-actions button {
    padding: 0.8vh 1.2vw;
    font-size: 1.6vh;
  }

  /* Game Invite Notification Popup for small screens */
  #gameInviteNotificationPopup, #inviteDeclinedNotificationPopup {
      top: 1.5vh;
      right: 1.5vw;
      padding: 1.5vh 1.5vw;
      max-width: 90vw;
  }
  #gameInviteNotificationPopup img, #inviteDeclinedNotificationPopup img {
      width: 18vw;
      height: 18vw;
  }
  #gameInviteNotificationPopup p, #inviteDeclinedNotificationPopup p {
      font-size: 2vh;
  }
  #gameInviteNotificationPopup .button-group {
      gap: 1.5vw;
  }
  #gameInviteNotificationPopup .btn-decline,
  #gameInviteNotificationPopup .btn-accept,
  #inviteDeclinedNotificationPopup .btn-ok {
      padding: 1vh 2vw;
      font-size: 1.8vh;
  }
}

/* Even smaller screens (e.g., iPhone SE) */
@media (max-width: 375px) {
  #playerVsPlayerSection {
    margin-top: 0.8vh;
    margin-bottom: 0.8vh;
    padding: 0.8vh 2vw;
  }
  .player-box img {
    width: 11vw; /* Slightly smaller for very small screens */
    height: 11vw;
    max-width: 38px;
    max-height: 38px;
  }
  .player-box span {
    font-size: 1.7vh;
  }
  .vs-text {
    font-size: 2.3vh;
  }
  .info-card {
    padding: 1vh 2vw;
    margin-top: 0.6vh;
    margin-bottom: 1.2vh;
    font-size: 1.9vh;
  }
  #gameArea #grid {
    max-width: 98vw; /* Adjusted max-width for grid */
    gap: 1vw; /* Adjusted gap for very small screens */
    margin-bottom: 1.2vh;
  }
  /* Candy size adjustments for very small screens */
  #grid button.candy-size-small {
    width: 17vw;
    height: 17vw;
    max-width: 75px;
    max-height: 75px;
    font-size: 4vh;
  }
  #grid button.candy-size-medium {
    width: 22vw;
    height: 22vw;
    max-width: 105px;
    max-height: 105px;
    font-size: 9vh;
  }
  #grid button.candy-size-large {
    width: 25vw;
    height: 25vw;
    max-width: 150px;
    max-height: 150px;
    font-size: 11vh;
  }
  #gameArea button {
    margin-top: auto; /* Push to bottom */
    margin-bottom: 1.2vh;
    padding: 1.2vh 2.8vw;
    font-size: 2.2vh;
  }

  /* Game Invite Notification Popup for very small screens */
  #gameInviteNotificationPopup, #inviteDeclinedNotificationPopup {
      top: 1vh;
      right: 1vw;
      padding: 1vh 1vw;
  }
  #gameInviteNotificationPopup img, #inviteDeclinedNotificationPopup img {
      width: 20vw;
      height: 20vw;
  }
  #gameInviteNotificationPopup p, #inviteDeclinedNotificationPopup p {
      font-size: 1.8vh;
  }
  #gameInviteNotificationPopup .btn-decline,
  #gameInviteNotificationPopup .btn-accept,
  #inviteDeclinedNotificationPopup .btn-ok {
      padding: 0.8vh 1.5vw;
      font-size: 1.6vh;
  }
}
